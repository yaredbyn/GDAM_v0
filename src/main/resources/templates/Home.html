<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0">

	<title>Gdam-title</title>

	<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" />
	<script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script type="text/javascript" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>


	<style>
		/* Background color adjustment for .bg-dark */
		.bg-dark {
			background-color: lightblue !important;
		}

		/* Logo image styling */
		.logo-img {
			max-width: 100%;
			height: auto;
			/* Maintain aspect ratio */
			max-height: 30px;
			/* Ensure logo height is consistent */
		}

		/* Navbar styling */
		.navbar {
			padding: 0.5rem 1rem;
			min-height: 50px;
			/* Consistent height */
			display: flex;
			align-items: center;
			/* Center logo and links vertically */
		}

		/* Navbar link font size */
		.navbar-nav .nav-link {
			font-size: 14px;
			/* Consistent font size */
		}

		/* Scrolling text */
		.scrolling-text {
			width: 100%;
			overflow: hidden;
			white-space: nowrap;
			box-sizing: border-box;
		}

		.scrolling-text p {
			display: inline-block;
			animation: scroll-back-and-forth 10s linear infinite;
			white-space: nowrap;
		}

		@keyframes scroll-back-and-forth {
			0% {
				transform: translateX(100%);
			}

			100% {
				transform: translateX(-100%);
			}
		}

		/* Responsive adjustments for scrolling text */
		@media (max-width: 768px) {
			.scrolling-text {
				overflow: hidden;
				/* Ensure overflow is hidden */
			}

			.scrolling-text p {
				animation: scroll-back-and-forth 8s linear infinite;
				/* Adjust timing for smaller screens */
			}
		}

		/* Section styling */
		.carousel-section,
		.form-section,
		.payment-section {
			width: 40%;
			margin: 0 auto;
		}

		.carousel-section {
			height: 40vh;
			margin-bottom: 3px;
			padding: 0;
		}

		.carousel-item {
			width: 100%;
			height: 100%;
		}

		.carousel-item img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.form-section {
			height: 70vh;
			margin-bottom: 10px;
		}

		.payment-section {
			height: 20vh;
			text-align: center;
			background-color: #f0f0f0;
			display: flex;
			justify-content: center;
			align-items: center;
			margin-top: 16px;
			/* Decreased top margin by 2px */
			margin-bottom: 6px;
			/* Decreased bottom margin by 2px */
		}

		.sticky-footer {
						
			position: absolute;
			bottom: 0;
			width: 100%;
			height: 60px;
			background-color: lightblue !important;
		}

		body,
		html {
			height: 100%;
		}

		.container-fluid {
			min-height: 100vh;
			position: relative;
			padding-bottom: 60px;
			/* Footer height */
		}

		/* Consistent styling for all screen sizes */
		@media (max-width: 768px) {
			.logo-img {
				max-height: 30px;
				/* Ensure logo height is consistent */
			}

			.navbar-nav .nav-link {
				font-size: 14px;
				/* Consistent font size */
			}

			.carousel-section,
			.form-section,
			.payment-section {
				width: 90%;
			}

			.carousel-section {
				height: 30vh;
			}
		}

		@media (max-width: 576px) {
			.logo-img {
				max-height: 30px;
				/* Ensure logo height is consistent */
			}
		}
		
		
		
	</style>




</head>

<body>
	<div class="container-fluid d-flex flex-column min-vh-100">
		<div>
			<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
				<!--logo-->
				<a class="navbar-brand" th:href="@{/}">
					<img th:src="@{/images/gdamLogo.png}" class="img-fluid logo-img" alt="Logo" />
				</a>

				<!--sandwich button-->
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#topNavbar">
					<span class="navbar-toggler-icon"></span>
				</button>

				<!-- nav bar-->
				<div class="collapse navbar-collapse" id="topNavbar">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link text-dark" th:href="@{/}">Users</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" th:href="@{/}">Articles</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" th:href="@{/}">Menus</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" th:href="@{/}">about Us </a>
						</li>
					</ul>
				</div>
			</nav>
		</div>

		<div class="scrolling-text">
			<p>This fund is dedicated to the construction of a monastery.</p>
		</div>

		<!-- First Section: Bootstrap Carousel (40% of the page) -->
		<div class="carousel-section">
			<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
				<ol class="carousel-indicators">
					<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
					<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
					<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
				</ol>
				<div class="carousel-inner">
					<div class="carousel-item active">
						<img class="d-block w-100" th:src="@{/images/slid_1.png}" alt="First slide">
					</div>
					<div class="carousel-item">
						<img class="d-block w-100" th:src="@{/images/slid_2.png}" alt="Second slide">
					</div>
					<div class="carousel-item">
						<img class="d-block w-100" th:src="@{/images/slid_3.png}" alt="Third slide">
					</div>
				</div>
				<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
		</div>

		<!-- Second Section: Form (50% of the page) -->
		<div class="form-section">
			<h2 class="text-center">Registration Form</h2>
			<form id="donorForm">
				<div class="form-group">
					<label for="firstName">First Name</label>
					<input type="text" class="form-control" id="firstName" name="firstName"
						placeholder="Enter your first name" required>
				</div>
				<div class="form-group">
					<label for="lastName">Last Name</label>
					<input type="text" class="form-control" id="lastName" name="lastName"
						placeholder="Enter your last name" required>
				</div>
				<!-- Added Email Field -->
				<div class="form-group">
					<label for="email">Email</label>
					<input type="email" class="form-control" id="email" name="email" placeholder="Enter your email"
						required>
				</div>
				<!-- Added Amount Donated Field -->
				<div class="form-group">
					<label for="amountDonated">Amount Donated</label>
					<input type="number" step="0.01" class="form-control" id="amountDonated" name="amountDonated"
						placeholder="Enter donation amount" min="0" required>
				</div>
				<!-- Hidden CSRF Token Field (if necessary) -->
				<!-- <input type="hidden" name="_csrf" th:value="${_csrf.token}" /> -->
				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary mb-4px">Submit</button>
			</form>
		</div>


		<!-- Third Section: Placeholder for Payment System (20% of the page) -->
	<!-- 	<div class="payment-section mt-10px">
			<h3>Payment System Integration Coming Soon</h3>
		</div>   -->

		<!-- Footer -->
		<footer class="sticky-footer text-center py-3 bg-dark">
			<p>&copy;2024, Gdam . All rights reserved.</p>
		</footer>
	</div>

	<script type="text/javascript">
		$(document).ready(function () {
			$('#donorForm').on('submit', function (e) {
				e.preventDefault(); // Prevent default form submission

				// Perform client-side validation
				let valid = true;
				clearValidationMessages(); // Clear previous validation messages

				// Get form elements
				const firstName = document.getElementById('firstName');
				const lastName = document.getElementById('lastName');
				const email = document.getElementById('email');
				const amountDonated = document.getElementById('amountDonated');

				// First Name Validation
				if (!firstName.value.trim()) {
					showValidationMessage(firstName, 'First name is required.');
					valid = false;
				}

				// Last Name Validation
				if (!lastName.value.trim()) {
					showValidationMessage(lastName, 'Last name is required.');
					valid = false;
				}

				// Email Validation
				if (!email.value.trim() || !email.checkValidity()) {
					showValidationMessage(email, 'Please enter a valid email address.');
					valid = false;
				}

				// Amount Donated Validation
				if (amountDonated.value <= 0 || isNaN(amountDonated.value)) {
					showValidationMessage(amountDonated, 'Amount donated must be a positive number.');
					valid = false;
				}

				// If the form is invalid, stop the submission
				if (!valid) return;

				// If form is valid, proceed with submission
				var url = "[[@{/add}]]";
				/* var csrfValue = $("input[name='_csrf']").val(); */

				// Collect form data
				var form = $(this);
				var formData = form.serialize();

				// Include CSRF token if necessary
				// formData += '&_csrf=' + encodeURIComponent(csrfValue);

				$.post(url, formData, function (response) {
					if (response == "Successful") {
						// Form submission successful
						//alert('Successfully submitted.');
						// Optionally, reset the form
						form[0].reset();
						window.location.href = "/gdam/payment";
					} else {
						// Handle different responses from the server
						alert('Server response: ' + response);
					}
				}).fail(function (xhr, status, error) {
					// Handle error response
					alert('An error occurred: ' + error);
				});

				return false;
			});

			// Function to display validation messages
			function showValidationMessage(element, message) {
				const formGroup = element.closest('.form-group');
				let errorElement = formGroup.querySelector('.error-message');
				if (!errorElement) {
					errorElement = document.createElement('div');
					errorElement.className = 'error-message text-danger';
					formGroup.appendChild(errorElement);
				}
				errorElement.textContent = message;
			}

			// Function to clear validation messages
			function clearValidationMessages() {
				const messages = document.querySelectorAll('.error-message');
				messages.forEach(message => message.remove());
			}
		});
	</script>

</body>

</html>